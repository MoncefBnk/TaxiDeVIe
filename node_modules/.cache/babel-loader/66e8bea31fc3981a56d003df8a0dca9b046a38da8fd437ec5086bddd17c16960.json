{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Clement/Desktop/ProjetS4/taxi-de-vie/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Clement/Desktop/ProjetS4/taxi-de-vie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref } from 'vue';\nimport { useStore } from 'vuex';\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\n// Rajouter la confirmation de mail\nexport default {\n  setup: function setup() {\n    var register_form = ref({\n      numberClient: '',\n      name: '',\n      lastName: '',\n      mail_address: '',\n      adress: '',\n      phone: ''\n    });\n    var store = useStore();\n    var passwordsDoNotMatch = ref(false);\n    var register = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var auth, unsubscribe;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (register_form.value.password === register_form.value.confirmPassword) {\n                passwordsDoNotMatch.value = false;\n                try {\n                  store.dispatch('register', register_form.value);\n                  auth = getAuth();\n                  unsubscribe = onAuthStateChanged(auth, /*#__PURE__*/function () {\n                    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(user) {\n                      var userUid, userData;\n                      return _regeneratorRuntime().wrap(function _callee$(_context) {\n                        while (1) switch (_context.prev = _context.next) {\n                          case 0:\n                            if (!user) {\n                              _context.next = 6;\n                              break;\n                            }\n                            userUid = user.uid;\n                            userData = {\n                              numberClient: userUid,\n                              name: register_form.value.fullName,\n                              lastname: register_form.value.lastName,\n                              mail_address: register_form.value.email,\n                              adress: register_form.value.address,\n                              phone: register_form.value.phoneNumber\n                            };\n                            _context.next = 5;\n                            return store.dispatch('registerUserWithAPI', userData);\n                          case 5:\n                            unsubscribe();\n                          case 6:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }, _callee);\n                    }));\n                    return function (_x) {\n                      return _ref2.apply(this, arguments);\n                    };\n                  }());\n                } catch (error) {\n                  console.error('Error registering user:', error.message);\n                }\n              } else {\n                passwordsDoNotMatch.value = true;\n              }\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function register() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    return {\n      register_form: register_form,\n      register: register,\n      passwordsDoNotMatch: passwordsDoNotMatch\n    };\n  }\n};","map":{"version":3,"names":["ref","useStore","getAuth","onAuthStateChanged","setup","register_form","numberClient","name","lastName","mail_address","adress","phone","store","passwordsDoNotMatch","register","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","auth","unsubscribe","wrap","_callee2$","_context2","prev","next","value","password","confirmPassword","dispatch","_ref2","_callee","user","userUid","userData","_callee$","_context","uid","fullName","lastname","email","address","phoneNumber","stop","_x","apply","arguments","error","console","message"],"sources":["C:\\Users\\Clement\\Desktop\\ProjetS4\\taxi-de-vie\\src\\components\\RegisterPage.vue"],"sourcesContent":["/* eslint-disable */\r\n<template>\r\n\t<main class=\"login\">\r\n\t\t<section class=\"forms\">\r\n\t\t\t<form class=\"register\" @submit.prevent=\"register\">\r\n\t\t\t\t<h2>Welcome to Taxi de vie</h2>\r\n\t\t\t\t<h2>Register</h2>\r\n\t\t\t\t<input type=\"text\" placeholder=\"Full Name\" v-model=\"register_form.fullName\" />\r\n\t\t\t\t<input type=\"text\" placeholder=\"Last Name\" v-model=\"register_form.lastName\" />\r\n\t\t\t\t<input type=\"email\" placeholder=\"Email address\" v-model=\"register_form.email\" />\r\n\t\t\t\t<input type=\"password\" placeholder=\"Password\" v-model=\"register_form.password\" />\r\n\t\t\t\t<input type=\"password\" placeholder=\"Confirm Password\" v-model=\"register_form.confirmPassword\" />\r\n\t\t\t\t<input type=\"text\" placeholder=\"Address\" v-model=\"register_form.address\" />\r\n\t\t\t\t<input type=\"tel\" placeholder=\"Phone Number\" v-model=\"register_form.phoneNumber\" />\r\n\t\t\t\t<input type=\"submit\" value=\"Register\" />\r\n\t\t\t\t<p>Already have an account ?</p>\r\n\t\t\t\t<router-link to=\"login\" class=\"register-links\">Login here !</router-link>\r\n\t\t\t\t<p v-if=\"passwordsDoNotMatch\">Passwords do not match!</p>\r\n\t\t\t</form>\r\n\t\t</section>\r\n\t</main>\r\n</template>\r\n  \r\n<script>\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\r\n// Rajouter la confirmation de mail\r\nexport default {\r\n\tsetup() {\r\n\t\tconst register_form = ref({\r\n\t\t\tnumberClient: '',\r\n\t\t\tname: '',\r\n\t\t\tlastName: '',\r\n\t\t\tmail_address: '',\r\n\t\t\tadress: '',\r\n\t\t\tphone: '',\r\n\t\t});\r\n\r\n\t\tconst store = useStore();\r\n\r\n\t\tconst passwordsDoNotMatch = ref(false);\r\n\r\n\t\tconst register = async () => {\r\n\t\t\tif (register_form.value.password === register_form.value.confirmPassword) {\r\n\t\t\t\tpasswordsDoNotMatch.value = false;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tstore.dispatch('register', register_form.value);\r\n\r\n\t\t\t\t\tconst auth = getAuth();\r\n\r\n\t\t\t\t\tconst unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n\t\t\t\t\t\tif (user) {\r\n\t\t\t\t\t\t\tconst userUid = user.uid;\r\n\r\n\t\t\t\t\t\t\tconst userData = {\r\n\t\t\t\t\t\t\t\tnumberClient: userUid,\r\n\t\t\t\t\t\t\t\tname: register_form.value.fullName,\r\n\t\t\t\t\t\t\t\tlastname: register_form.value.lastName,\r\n\t\t\t\t\t\t\t\tmail_address: register_form.value.email,\r\n\t\t\t\t\t\t\t\tadress: register_form.value.address,\r\n\t\t\t\t\t\t\t\tphone: register_form.value.phoneNumber,\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tawait store.dispatch('registerUserWithAPI', userData);\r\n\t\t\t\t\t\t\tunsubscribe();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('Error registering user:', error.message);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tpasswordsDoNotMatch.value = true;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tregister_form,\r\n\t\t\tregister,\r\n\t\t\tpasswordsDoNotMatch,\r\n\t\t};\r\n\t},\r\n};\r\n</script>\r\n  \r\n  \r\n<style>\r\n.forms {\r\n\tdisplay: flex;\r\n\tmin-height: 100vh;\r\n}\r\n\r\nform {\r\n\tflex: 1 1 0%;\r\n\tpadding: 6rem 1rem 1rem;\r\n}\r\n\r\nform.register {\r\n\tcolor: #FFF;\r\n\tbackground-color: rgb(245, 66, 101);\r\n\tbackground-image: linear-gradient(to bottom right,\r\n\t\t\trgb(245, 66, 101) 0%,\r\n\t\t\trgb(189, 28, 60) 100%);\r\n}\r\n\r\nh2 {\r\n\tfont-size: 2rem;\r\n\ttext-transform: uppercase;\r\n\tmargin-bottom: 2rem;\r\n}\r\n\r\ninput {\r\n\tappearance: none;\r\n\tborder: none;\r\n\toutline: none;\r\n\tbackground: none;\r\n\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\tmax-width: 400px;\r\n\tmargin: 0 auto;\r\n\tfont-size: 1.5rem;\r\n\tmargin-bottom: 2rem;\r\n\tpadding: 0.5rem 0rem;\r\n}\r\n\r\ninput:not([type=\"submit\"]) {\r\n\topacity: 0.8;\r\n\ttransition: 0.4s;\r\n}\r\n\r\ninput:focus:not([type=\"submit\"]) {\r\n\topacity: 1;\r\n}\r\n\r\ninput::placeholder {\r\n\tcolor: inherit;\r\n}\r\n\r\nform.register input:not([type=\"submit\"]) {\r\n\tcolor: #FFF;\r\n\tborder-bottom: 2px solid #FFF;\r\n}\r\n\r\nform.login input:not([type=\"submit\"]) {\r\n\tcolor: #2c3e50;\r\n\tborder-bottom: 2px solid #2c3e50;\r\n}\r\n\r\nform.login input[type=\"submit\"] {\r\n\tbackground-color: rgb(245, 66, 101);\r\n\tcolor: #FFF;\r\n\tfont-weight: 700;\r\n\tpadding: 1rem 2rem;\r\n\tborder-radius: 0.5rem;\r\n\tcursor: pointer;\r\n\ttext-transform: uppercase;\r\n}\r\n\r\nform.register input[type=\"submit\"] {\r\n\tbackground-color: #FFF;\r\n\tcolor: rgb(245, 66, 101);\r\n\tfont-weight: 700;\r\n\tpadding: 1rem 2rem;\r\n\tborder-radius: 0.5rem;\r\n\tcursor: pointer;\r\n\ttext-transform: uppercase;\r\n}\r\n\r\n.register-links {\r\n\tcolor: #FFF;\r\n\ttext-decoration: underline;\r\n\tcursor: pointer;\r\n\tmargin-bottom: 2rem;\r\n\tdisplay: block;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}